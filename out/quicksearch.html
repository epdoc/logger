<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Global Members reqId Express middleware adds a unique id ```_reqId``` and high-resolution start time ```_hrStartTime``` to the request object. The high-resolution start time uses ```process.hrtime()```. Methods formatMS(ms) Format ms as MM:SS.mmm Parameters: Name Type Description ms Returns: Type String Request(name, options) Stub for express.request object, used when passing request object around when simulating req/res/next flow. Parameters: Name Type Description name Define the name to use for your own 'locals' (private variables). options The object to attach to req[name], defaults to . Returns: A request object × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Classes Classes ConsoleTransport LineTransport Logger LogglyTransport LogManager Response × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest LoggerA logging module supporting built-in and custom transports, Express 4 response mixins, rich message and data syntax, and chainable methods for creating log events. Generally follows Winston's logging method calls for simpler messages, but with the addition of chainable calls to set other output columns. Note: express middleware is currently being revised. Home Page and API Documentation InstallInstall npm install --save epdoc-loggerQuick StartLog to the console. var log = require('epdoc-logger').start().get(); log.info(&quot;Hello world&quot;); log.log('debug',&quot;Hello %s&quot;,&quot;world&quot;);Log to a file, and buffer any messages until the logger is set up var logMgr = require('epdoc-logger').logMgr(); var log = logMgr.get('main'); log.info(&quot;Starting application&quot;); var config = require('config.json'); logger.setTransport('file',{path:config.logFile}); log.info(&quot;Hello world&quot;);Log to loggly, buffering and making batch calls to loggly. var logger = require('epdoc-logger').logger({autoRun:false); var log = logger.get('main'); log.info(&quot;Starting application&quot;); logger.setTransport('loggly',{token:'MyToken'}); log.info(&quot;Hello world&quot;); // log a message count for all the different log levels logger.writeCount(); // Shutdown properly so loggly message buffer is flushed logger.destroying().then(function() { done(); }, function(err) { done(err); });In the above we are using two different objects: logger - The main logger, usually a singleton, where the transport is configured log - A per-javascript-file object upon which the actual logging methods are attached. This is obtained by calling logger.get(moduleName) and is used to log the filename along with the log message. Configuring TransportsThe module has built-in support for the following transports: console (default) file (specify path) - logs as a JSON array SOS Max - SOS max is the POWERFLASHER Socket Output Server - a fast and helpful programmer tool with graphical user interface to display log messages for debugging purpose. line - A line buffer used for automatic testing loggly - See loggly.com. On startup the logger can wait for a transport to be initialized before logging, or it can being writing log messages immediately. By default the logger auto-starts and uses the Console Transport. A call to setTransport call start to begin logging. Successfully setting the transport will also start writing log messages. Messages are buffered prior to the transport being intitialized, so prior to this event no messages will be lost. Logging to ConsoleMain File var gLogMgr = require('epdoc-logger').logMgr(a).start(); var log = gLogMgr.get('main'); log.info(&quot;Return value for %s is %s&quot;, &quot;hello&quot;, &quot;world&quot; ); log.data('req',{a:3}).info(); log.data('res',{b:4}).info(&quot;My message with %s support&quot;, 'formatting');Other File var log = require('epdoc-logger').get('other'); log.info(&quot;Hello world&quot;);Logging to a FileThis shows the more general use of the logger object. var gLogMgr = require('epdoc-logger').logger(); var log = gLogMgr.get('MyModule'); logger.setTransport( 'file', { path: 'path/to/myfile.log' } ); log.info(&quot;Return value for %s is %s&quot;, &quot;hello&quot;, &quot;world&quot; ); log.data('req',{a:3}).info(); log.data('res',{b:4}).info(&quot;My message with %s support&quot;, 'formatting');Log output to a file is a JSON-formatted array with [ date, level, sid, module, message, data ], as defined under the LogMessage function (below). Logging to SOSWhen you set the logger to SOS the setLogger method returns immediately, but the socket takes awhile to initialize. In the meantime log messages are queued up and getLogger() returns the SOS logger. Once the connection is made the messages are flushed. If the connection is refused the messages are flushed to the previously set logger output (usually the console). var logger = require('epdoc-logger').logger({autoRun:false}); var log = Logger.get('MyModule'); logger.setTransport( { type: 'sos', bIncludeSessionId: false } ); log.info(&quot;Return value for %s is %s&quot;, &quot;hello&quot;, &quot;world&quot; );Logging to LogglyLoggly output is buffered and sent in batches. As a result it is important to shutdown logging before exiting. See the example earlier in this readme showing how this is done. Advanced (needs updating)Transports can also be closed using unsetLogger. In this event logging will revert to the previously specified transport. For example, if you specify an SOS transport and the SOS application is closed, logging will return back to the console and the console will be (re)started automatically. If an active transport closes on it's own (e.g. SOS Max application exits) the active transport is automatically shifted off the list of transports as if calling unsetLogger. See the files in the test folder for additional examples and information. A call to setLogger will stop the previously activated transport (if any), add the new transport to the stack and automatically start the new transport. Transports are maintained in a list. When calling setLogger you are unshifting a transport onto the head of the list. When you call unsetLogger you are stopping the transport, shifting it off the list of transports, and restoring and restarting the previously set transport. The Logger will buffer messages while switching transports, however individual transports can do their own buffering (e.g. file). If a transport closes prematurely, it's buffer may be lost. There are probably few instances where you would need to manually call unsetLogger or deal with the list of transports, except where wishing to start and stop an SOS-style transport. The setLogger(type,options) has the following parameters: type - The transport type, which is either a string (one of the built-in transports 'console', 'file' or 'sos') or the class of a custom transport. options - An object with the following optional parameters path - 'path/to/myfile.log', used when type is file dateFormat - one of 'ISO' or 'formatMS', default is dependent on the transport but is usually 'formatMS' (not used with loggly) bIncludeSid - Indicates whether the sessionId should be included in the output, defaults to true To build your own custom transport class it just copy or subclass the console transport (obtained using Logger.getLoggerClass('console')) and modify as has been done for the file and sos transports. Loggly has these additional options: token (required) Token issued by [loggly.com] for your account bufferSize (optional, default 100 messages) Number of messages to buffer flushInterval (optional, default 5000 ms) An interval timer that flushes messages if there are any Log MessagesLogging is done by one of these methods, however the 2nd is recommended for normal applications, and it is recommended that you start there. Directly calling the Logger's logMessage or lower level logParams functions Using logger.get() to create a logging object and calling methods on that object (as shown in above examples) By creating your own logging object that exposes it's own methods, then use this object to call logParams If you are creating your own logging object, use Logger's logging object as an example. You can also look at middleware/responseLogger.js for an example of a module that extends the express.js response object with logging methods. Logging using Logger Object and logMessage methodThe logParams function directly adds a log message object to the log message queue. The logParams function is used by the Logging Object (next section) and by any custom logging objects that you may choose to create. var logger = require('epdoc-logger').logger(); logger.setLogger( { type: 'sos', bIncludeSessionId: true } ); logger.setLevel( 'info' ); logger.logParams( { level: 'info', sid: '123', module: 'api.org.create', message: &quot;My formatted message&quot; });The logParams function takes an object with the following parameters: level - Must be one of LEVEL_ORDER values, all lower case sid - (Optional) sessionID to display module - (Optional) Module descriptor to display (usually of form route.obj.function) action - (Optional) Action (verb) descriptor to display (eg. 'org.update') time - (Optional) A date object with the current time, will be filled in if not provided timeDiff - (Optional) The difference in milliseconds between 'time' and when the application was started, based on reading Logger.getStartTime() message - A string or an array of strings. If an array the string will be printed on multiple lines where supported (e.g. SOS). The string must already formatted (e.g.. no '%s') data - Any object, will be serialized as JSON Messages are flushed from the queue whenever the transport indicates it is ready for more messages. Messages are then passed to the transport by calling the transport's write method and passing the log message object as a method parameter. The transport then formats and outputs the data. You can layer your own logging library underneath epdoc-logger by wrapping your library as a transport. Logging using Log Object (recommended)A new Module Logging object is obtained by calling get on the logger. A shortcut is to use require('epdoc-logger').get() to obtain the object. It is recommended that you create a new log object for each module or request. Attach your log object to a request object when you want to log in the context of the request. In this situation you should also set { sid: true } in your LogManager. // Return new logging object with property ```moduleName``` set. var log = require('epdoc-logger').get('MyModuleName');The string &quot;MyModuleName&quot; above should usually be set to the name of your Javascript file, module, or emitter. It is output as a column or property of each line that is created by calling methods on the log object. The logging object provides a convenient interface that sits above the logParams function and adds a number of useful, chainable logging methods, such as info, data, action, etc. // Each of these lines outputs a new log message log.info(&quot;Return value for %s is %s&quot;, &quot;hello&quot;, &quot;world&quot; ); log.log('info',[&quot;A multi-line&quot;,&quot;output&quot;,[&quot;With formatted %drd line&quot;,%d]]); // Output a message and a JSON-encoded object log.data('key2',{type:'value2'}).info(&quot;My message&quot;); // Output two objects with no accompanying message log.data('key1',{type:'value1'}).data('key2',{type:'value2'}).debug();The Logging object supports chaining. Most methods will return the object. Items added with the data method are flushed when logArgs is called. logArgs is called directly or by any of the methods info, debug, log, etc. You can also set per-Log Object custom data using the log.set() method. Data set this way remain constant for the life of the log object. For requests this might be useful to output something like the messageId of a request. To output custom data you will also need to set { custom: true } in your LogManager Logging CommandsThis sections shows example uses of the LogManagher object. // Get the global logger object var logMgr = require('epdoc-logger').logMgr({sid:false}); // Logger static methods logMgr.setTransport( 'file', { path: 'path/to/myfile.log', dateFormat: 'ISO', sid: false } ); var loggerType = logMgr.getCurrentTransport().type(); // Will return the transport type of the logger logMgr.setLevel( 'warn' ); var startTime = logMgr.getStartTime(); // Milliseconds // Get a Logger object for this file or module var log = logMgr.get('MyModuleName'); // Instance methods. Each line outputs a message. log.logObj('a',1).logObj('b',[2,3]).info(); log.logObj({a:1,b:[2,3]}).info(&quot;My message&quot;); log.info( &quot;I just want to say %s to the %s&quot;, &quot;Hello&quot;, &quot;World&quot; ); log.action('obj.update').debug( &quot;We %s formatted messages&quot;, &quot;do&quot; ); log.error( new Error(&quot;My error&quot;) ); log.verbose( &quot;The default is to not output verbose messages, so this will not by default be output&quot; ); log.warn( &quot;Danger Will Robinson, danger&quot; ); log.fault( &quot;Restarting server in %d seconds&quot;, 10 ); // Outputs a new message log.date(); // Output now's date/time log.separator(); // Output a line separator log.log( 'info', &quot;This method %s supports formatting&quot;, &quot;also&quot; ); // Enable verbose messages to be output for this log object (overrides global setting) log.setLevel( &quot;verbose&quot; );ChainingThese methods on the Module Logging (log) object support chaining. The following methods all add column values to the message that is output but do not output the message: action - Sets the action column value to this string. logObj - Sets the data column value. Either pass in a key value pair, which is then added to the data object, or an object, which the data object is then set to. set - Sets a value in a custom column and keeps this value for the duration of the Log object's lifespan. This column is currently only output to the loggly transport. The following methods result in a message being output with the corresponding log level set: info warn debug verbose error fatal The following methods result in a message output with log level set to INFO: separator - Output a separator line containing # characters date - Outputs localtime, utctime and uptime log - Outputs level and string message, for example: log.log( 'info', &quot;Found %d lines&quot;, iLines ). level - Optional level (defaults to info) msg - String to output, formatted with util.format Custom Log LevelsLog level defaults are set in LogManager: this.LEVEL_DEFAULT = 'debug'; // Default threshold level for outputting logs this.LEVEL_INFO = 'info'; // If changing LEVEL_ORDER, what level should internally generated info messages be output at? this.LEVEL_WARN = 'warn'; // If changing LEVEL_ORDER, what level should internally generated warn messages be output at? this.LEVEL_ORDER = ['verbose', 'debug', 'info', 'warn', 'error', 'fatal'];You can customize log levels by setting the value of this array after constructing your LogManager object. Any subsequently created Logger objects will have methods with the names you have provided. Please use lowercase log level names. Express MiddlewareNote: This section needs to be updated. The included express middleware are instantiated as follows: var LogMgr = require('epdoc-logger'); var reqId = Logger.middleware().reqId; var responseLogger = Logger.middleware().responseLogger; var routeLogger = Logger.middleware().routeLogger; var routeSeparator = Logger.middleware().routeSeparator; var app = express(); app.use(reqId()); app.use(app.router); app.all('*', responseLogger()); app.all('*', routeSeparator()); app.all('*', routeLogger());See test/reqtest.js for an example of how to use a stub request and response method to test middleware. This technique can also be useful if you wish to use the req/res/next mechanism in non-express environments. As an example, you could have req/res objects for tracking AMQP (RabbitMQ) requests and responses and associating reqIds with the AMQP requests. reqIdAdds _reqId and _hrStartTime to the request object. These are used later when logging. responseLoggerThe responseLogger middleware mixes custom logging methods, similar to those in the logging object, into the express response object. This will add request-context-sensitive logging information to each log message. As with the logging object, most methods can be chained. An example usage: function myFunction(req,res,params) { res.pushRouteInfo('myFunction'); res.action('complete').logObj(params).info('Entering function'); res.popRouteInfo(); }routeSeparatorAdds a separator line to the log file for each new route. routeLoggerAdds an information line to the log file for each new route. More InformationIt would be nice if there were more documentation for the logging methods, but in the meantime, please refer to the source code in src/log.js. TestTests have not been updated, however I have started migrating these to mocha. Action Items The express middleware has not been tested since version 2.0.0 has been started. Add koa middleware (I don't currently have a koa project going, so this may not happen for awhile) Loggly support - DONE! AuthorJim Pravetz jpravetz@epdoc.com LicenseMIT × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"ConsoleTransport.html":{"id":"ConsoleTransport.html","title":"Class: ConsoleTransport","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Class: ConsoleTransport ConsoleTransport new ConsoleTransport(options) Create a new console transport. Parameters: Name Type Description options Output options include: dateFormat = If &quot;ISO&quot; then output time as an ISO Date, otherwise output as time offset from app launch sid = If true then output express request and session IDs, otherwise do not output these values buffer = Interval in milliseconds to flush buffer (used for transports that buffer) Methods clear() Used to clear the logger display. This is applicable only to certain transports, such as socket transports that direct logs to a UI. ready() Return true if this logger is ready to accept write operations. Otherwise the caller should buffer writes and call write when ready is true. Returns: Type boolean write(params) Write a log line Parameters: Name Type Description params Object with the following properties: time = Date object level = log level (INFO, WARN, ERROR, or any string) reqId = express request ID, if provided (output if bIncludeSid is true) sid = express session ID, if provided (output if bIncludeSid is true) module = name of file or module (noun) action = method or operation being performed (verb) message = text string to output data = JSON object × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"LineTransport.html":{"id":"LineTransport.html","title":"Class: LineTransport","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Class: LineTransport LineTransport new LineTransport(options) Create a new line transport where output is added to a lines array. Used for testing. Parameters: Name Type Description options Output options include: dateFormat = If &quot;ISO&quot; then output time as an ISO Date, otherwise output as time offset from app launch bIncludeSid = If true then output express request and session IDs, otherwise do not output these values buffer = Interval in milliseconds to flush buffer (used for transports that buffer) Methods clear() Used to clear the logger display. This is applicable only to certain transports, such as socket transports that direct logs to a UI. ready() Return true if this logger is ready to accept write operations. Otherwise the caller should buffer writes and call write when ready is true. Returns: Type boolean write(params) Write a log line to the lines array, and the params to the data array. Parameters: Name Type Description params Object with the following properties: time = Date object level = log level (INFO, WARN, ERROR, or any string) reqId = express request ID, if provided (output if bIncludeSid is true) sid = express session ID, if provided (output if bIncludeSid is true) module = name of file or module (noun) action = method or operation being performed (verb) message = text string to output data = JSON object × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"Logger.html":{"id":"Logger.html","title":"Class: Logger","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Class: Logger Logger A Logger object has methods to write log information to a specified transport. The line below shows sample output when writting to the Console transport. [&quot;00:03.767&quot;,&quot;INFO&quot;,0,&quot;&quot;,&quot;main&quot;,&quot;app.initialized&quot;,&quot;We've initialized the app&quot;,{&quot;process&quot;:{&quot;pid&quot;:12345}}] For the above output, time is since this module was first initialized and is shown in milliseconds. This is followed by the log level, request ID, session ID, module/emitter name, action, message and arbitrary data. The format of the output is determined by the transport and it's settings. new Logger(logMgr, modulename, context) Create a new log object with methods to log to the transport that is attached to logMgr. This log object can be attached to another object, for example an Express request object, in order to pass the log object down through a calling stack. If a context is passed in, various properties may be harvested off of the req property. These include: req._reqId (populates reqId column), req.sid (uses req.session.id or req.sessionId and populates sid column), req._startTime and req._hrStartTime (either can be used to determine the response time for a request). Parameters: Name Type Argument Description logMgr LogManager The parent LogManager object that specifies the transport and provides lower-level output methods modulename string | Array.&lt;string&gt; &lt;optional&gt; The name of the module or emitter that is emitting the log message, used to populate the module output column. This can be modified to show method call hierarchy by calling pushName and popName. context object &lt;optional&gt; A context object. For Express or koa this would have req and res properties. Examples // Create a new Logger object step by step var EpdocLogger = require('epdoc-logger'); var LogManager = EpdocLogger.LogManager; var Logger = EpdocLogger.Logger; var logMgr = new LogManager(); var log = new Logger(gLogMgr,'logtest'); // Create a new Logger object the easy way using global LogManager. var log = require('epdoc-logger').get('logtest'); Methods action(arguments) Set the value of the action column. Action is a unique column in the log output and is a machine-searchable verb that uniquely describes the type of log event. Parameters: Name Type Argument Description arguments string &lt;repeatable&gt; Single string or multiple strings that are then joined with a '.'. Returns: The Logger object Type Logger Example log.action('message.sent').info(&quot;Message has been sent&quot;); data(key, value) Set a property or multiple properties in the data column. Parameters: Name Type Argument Description key string | object If a string then sets data[key] to value. Otherwise extend the object data with the object key. value string &lt;optional&gt; If key is a string then sets data[key] to this value. Returns: Type Logger Example log.data('a',3).data('b',4).info(); log.data({a:3,b:4}).info(); elapsed() Used to measure the duration of requests or other events. Add an 'elapsed' attribute to data being output, which is the time since this request object was initialized. Requirement: One of the following three must be initialized: 1. request object must set it's _delayTime 2. request object must set it's _startTime (ms) 3. must have called resetElapsed() to reset this.t0 Returns: this Type Object getHrElapsed() High resolution response time. Returns the response time in milliseconds with two digits after the decimal. Returns: Response time in milliseconds Type number hrElapsed(key) Adds the High Resolution response time to the data column. Parameters: Name Type Argument Default Description key string &lt;optional&gt; elapsed Name of property in the data column. Returns: Self. Type Logger isAboveLevel(level) Test if the given level is above the log level set for this Logger object. Parameters: Name Type Description level string Must be one of LogManager.LEVEL_ORDER. Returns: True if the level is equal to or greater then the reference, or if reference is null. Type boolean log(level, msg) Output a log message, specifying the log level as the first parameter, and a string with util.format syntax as a second parameter, for example myLogger.log('info', 'test message %s', 'my string'); The second parameter can optionally be an array of strings or arrays, each one of which will be treated as input to util.format. This is useful for logMgrs that support folding (muli-line output). Example: log.log( 'info', [[&quot;Found %d lines&quot;, iLines],&quot;My second line&quot;,[&quot;My %s line&quot;,'third']]); ); Parameters: Name Type Argument Default Description level string &lt;optional&gt; info One of Logger.LEVEL_ORDER. Defaults to `info` if not present. msg string The message String, or an array of strings, to be formatted with util.format. logObj(key, value) Log a key,value or an object. If an object the any previous logged objects are overwritten. If a key,value then add to the existing logged object. Objects are written when a call to info, etc is made. Parameters: Name Type Argument Description key string | number | object If a string or number then key,value is added, else the object ```key``` is added value &lt;optional&gt; If key is a string or number then data.key is set to value Deprecated: Use ```data``` method instead. Returns: Type Logger logParams(params) Log a raw message in the spirit of Logger.logMessage, adding sid and reqId columns from this.ctx.req Looks for sessionID in req.session.id or req.sessionId, otherwise uses the passed in values for sid and reqId (if any). This is the method that calls the underlying logging outputter. If you want to use your own logging tool, you can replace this method, or provide your own transport. Parameters: Name Type Description params Returns: Type * popName(options) See pushRouteInfo. Should be called if returning back up a function chain. Does not need to be called if the function terminates the request with a response. Parameters: Name Type Description options Available options are 'all' if all action contexts are to be removed from the _logging stack. See: Logger#pushName Returns: Response object pushName(name) A method to add context to the method stack that has gotten us to this point in code. The context is pushed into a stack, and the full stack is output as the module/emitter property of the log message. This method is usually called at the entry point of a function. Can also be called by submodules, in which case the submodules should call popName when returning. Note that it is not necessary to call popName when used in the context of an Express context and terminating a request with a response. Parameters: Name Type Description name (required) String in the form 'api.org.create' (route.method or route.object.method). See: Logger#popName Returns: Response object resetElapsed() Reset the elapsed time timer. Returns: Self Type Logger separator() Log a separator line that contains a message with '#' characters. Returns: Type Logger set(key, value) Set custom data that is output in a separate column called custom`. This column must be specifically enabled via the LogManager constructor's custom option. Parameters: Name Type Description key String | object If a string then sets custom.key = value, otherwise extends custom with key value * (Optional) Set key to this value Returns: Type Logger setLevel(level) Set the log level for this object. This overrides the global log level for this object. Parameters: Name Type Description level string Must be one of LogManager.LEVEL_ORDER. Returns: Self Type Logger × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"LogglyTransport.html":{"id":"LogglyTransport.html","title":"Class: LogglyTransport","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Class: LogglyTransport LogglyTransport new LogglyTransport(options) Create a new console transport. Parameters: Name Type Description options Output options include: dateFormat = If &quot;ISO&quot; then output time as an ISO Date, otherwise output as time offset from app launch bIncludeSid = If true then output express request and session IDs, otherwise do not output these values buffer = Interval in milliseconds to flush buffer (used for transports that buffer) Methods clear() Used to clear the logger display. This is applicable only to certain transports, such as socket transports that direct logs to a UI. ready() Return true if this logger is ready to accept write operations. Otherwise the caller should buffer writes and call write when ready is true. Returns: Type boolean write(params) Write a log line Parameters: Name Type Description params Object with the following properties: time = Date object level = log level (INFO, WARN, ERROR, or any string) reqId = express request ID, if provided (output if bIncludeSid is true) sid = express session ID, if provided (output if bIncludeSid is true) module = name of file or module (noun) action = method or operation being performed (verb) message = text string to output data = JSON object × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"LogManager.html":{"id":"LogManager.html","title":"Class: LogManager","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Class: LogManager LogManager new LogManager(options) Create a new LogManager using the default ConsoleTransport. The logger will not begin writing to the transport unless you set autoRun = true or call setTransport or call start. To use a different transport, set the transport using setTransport('file'). You will likely have one LogManager per application, then call logMgr.get() to get a log object which you will use for logging messages. Parameters: Name Type Description options Object { autoRun: false, sid: false, custom: boolean, level: string, transport: { string } Note that if transport has any parameters, you should set it using the setTransport method. Methods flushing() Flush the queue of the current transport Returns: Type Promise format() Shortcut to util.format() get(moduleName, opt_context) Return a new module logger object instance using the specified module name. Although it's a new logger instance, it still uses the same underlying 'writeMessageParams' method, and whatever transport is set globally. Parameters: Name Type Description moduleName Name of module or file, added as a column to log output opt_context object A context object. For Express or koa this would have 'req' and 'res' properties. The context.req may also have reqId and sid/sessionId/session.id properties that are used to populate their respective columns of output. Otherwise these columns are left blank on output. Returns: A new logger object. getCount() Return a count object Returns: with properties for 'warn', 'info', etc. Type Object getCurrentTransport() Get the current transport logger. Returns: The current transport, a subclass of console.js. Call type() on the return value to determine it's type. Type * getStartTime() Get the time at which the module was initialized Returns: Start time in milliseconds Type Number getTransportByName() Return one of the predefined transport objects. If you want to define your own class, it is suggested you subclass or copy one of the existing transports. Returns: LogManager Class for which you should call new with options, or if creating your own transport you may subclass this object. Type * isAboveLevel() Return true if the level is equal to or greater then the LogManager's logLevel property. logMessage(level, action, msg, data) Same as logParams with just these parameters set. Parameters: Name Type Description level action msg data logParams(msgParams) Write a raw message. We queue messages to handle the moment in time while we are switching streams and the new stream is not ready yet. We do queuing while we wait for it to be ready. You can completely bypass creating a logger instance in your class if you use this call directly, In this situation the log level filtering will be established by the log level (this.logLevel). Parameters: Name Type Description msgParams includes: level - Must be one of LEVEL_ORDER values, all lower case sid - (Optional) sessionID to display module - (Optional) Module descriptor to display (usually of form route.obj.function) time - (Optional) A date object with the current time, will be filled in if not provided timeDiff - (Optional) The difference in milliseconds between 'time' and when the application was started, based on reading LogManager.getStartTime() message - A string or an array of strings. If an array the string will be printed on multiple lines where supported (e.g. SOS). The string must already formatted (e.g.. no '%s') setLevel(level) Set the LogManager objects's minimum log level Parameters: Name Type Description level string Must be one of LEVEL_ORDER setStartTime(d) Set automatically when this moduel is initialized, but can be set manually to the earliest known time that the application was started. Parameters: Name Type Description d setTransport(type, options) Set log target by unshifting the provided transport object onto the list of transports. The default transport, before any is unshifted onto the list of transports, is the console transport. If you add a transport (eg. file transport) then later remove it, the previously set logger (eg. console) will be used. Parameters: Name Type Description type For the provided loggers, one of 'sos', 'file', 'line', or 'console'. For a custom transport this should be a transport class object that can be instantiated with 'new'. To create your own transport class, use getLoggerClass('console') and then subclass this class. options string are passed to the transport when constructing the new transport object. Options for the predefined transports are: path path to file, used by file transport timestamp {string} one of 'iso', 'smstime' or 'ms', defaults to 'ms' but may be overriden by transport requirements (e.g. loggly uses iso) sid {boolean} whether to include sessionId and reqId columns in log output (used with express and other request/response apps), overrides LogMgr setting. custom {boolean} Indicates whether to include 'custom' column or not, overrides LogMgr setting. unsetTransport() Unset the last logger. The latest logger is shifted off the list of loggers. writeCount() Write a count of how many of each level of message has been output. This is a useful function to call when the application is shutdown. × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "},"Response.html":{"id":"Response.html","title":"Class: Response","body":" Documentation Classes ConsoleTransportLineTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequest Class: Response Response new Response(opt_options) Add a log object to req and res objects. Parameters: Name Type Description opt_options Object responseBuilder: a method to build the response object in the event of an exception, error or success. Errors are indicated by the exception being passed in to the builder, or errorCode being defined. The value may be a function or 'json-api' to use the JSON API response builder. objName: {string} the name of an object to mixin our responseLogger methods with, defaults to 'log'. Returns: Type function × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-28T18:14:57-07:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
