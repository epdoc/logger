<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Global Members reqId Express middleware adds a unique id ```_reqId``` and high-resolution start time ```_hrStartTime``` to the request object. The high-resolution start time uses ```process.hrtime()```. self Returns an epdoc-logger singleton to expose classes and objects from the epdoc-logger module. Methods formatMS(ms) Format ms as MM:SS.mmm Parameters: Name Type Description ms Returns: Type String Request(name, options) Stub for express.request object, used when passing request object around when simulating req/res/next flow. Parameters: Name Type Description name Define the name to use for your own 'locals' (private variables). options The object to attach to req[name], defaults to . Returns: A request object × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Classes Classes CallbackTransport ConsoleTransport Logger LogglyTransport LogManager Response × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself epdoc-loggerA logging module supporting built-in and custom transports, Express 4 response mixins, rich message and data syntax, and chainable methods for recording log events. Generally supports Winston's logging method calls for simpler messages, but with the addition of a substantial number of new methods, many of which can be chained to create richer output with more columns of data. This page and API Reference are also formatted and available here. Installnpm install --save epdoc-loggerQuick StartLog to the console. var log = require('epdoc-logger').start().get(); log.info(&quot;Hello world&quot;);[&quot;00:00.001&quot;,&quot;INFO&quot;,0,&quot;&quot;,&quot;logger&quot;,&quot;logger.push.success&quot;,&quot;Set logger to Console&quot;,{},{&quot;transport&quot;:&quot;Console&quot;}] [&quot;00:00.015&quot;,&quot;INFO&quot;,0,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;Hello world&quot;,{}]Buffer messages until your logger is set up, then output to a file. var logMgr = require('epdoc-logger').logMgr(); var log = logMgr.get('main'); log.info(&quot;Starting application&quot;); var config = require('config.json'); logMgr.setTransport('file',{path:config.logFile,timestamp:'iso'}); log.info(&quot;Hello world&quot;);[&quot;2016-03-29T04:19:45.920Z&quot;,&quot;INFO&quot;,&quot;main&quot;,&quot;&quot;,&quot;Starting application&quot;] [&quot;2016-03-29T04:19:45.922Z&quot;,&quot;INFO&quot;,&quot;logger&quot;,&quot;logger.push&quot;,&quot;Setting logger to File (/path/to/file.log)&quot;,{&quot;transport&quot;:&quot;File (/path/to/file.log)&quot;}] [&quot;2016-03-29T04:19:45.924Z&quot;,&quot;INFO&quot;,&quot;logger&quot;,&quot;logger.push.success&quot;,&quot;Set logger to File (/path/to/file.log)&quot;,{&quot;transport&quot;:&quot;File (/path/to/file.log)&quot;}] [&quot;2016-03-29T04:19:45.926Z&quot;,&quot;INFO&quot;,&quot;main&quot;,&quot;&quot;,&quot;Hello world&quot;]Log to loggly.com, buffering and making batch calls to loggly. var logMgr = require('epdoc-logger').logMgr(); var log = logMgr.get('main'); log.info(&quot;Starting application&quot;); logMgr.setTransport('loggly',{token:'MyToken'}); log.info(&quot;Hello world&quot;); // log a message count for all the different log levels logMgr.writeCount(); // Shutdown properly so loggly message buffer is flushed logMgr.destroying().then(function() { done(); }, function(err) { done(err); });ClassesThere are two main objects used for logging: LogManager Usually a singleton Used to configure the transport, set global options, and start writing to the transport Can also be used to directly write to the transport (see LogManager#logParams and LogManager#logMessage) See the Log Manager API Reference Logger A per-emitter object Create a new log object for every file (emitter), or for every request Chainable methods via which to write log output See the Logger API Reference You can access these two classes off of the exported epdoc-logger module: var epdocLogger = require('epdoc-logger'); var LogManager = epdocLogger.LogManager; var Logger = epdocLogger.Logger;LogManager ClassA shortcut for getting a LogManager singleton is to call the module's logMgr method. var logMgr = require('epdoc-logger').logMgr();This is equivalent to: var epdocLogger = require('epdoc-logger'); var LogManager = epdocLogger.LogManager; var logMgr = new LogManager();Because you may need to load config information before configuring your transport you must explicitly start logging by calling LogManager#start. And because some log tranports are buffered, you should also call LogManager#flushing or LogManager#destroying before shutting down. Logger ClassLogger object are created by calling new Logger(). Typically you would create a new Logger object for every javascript file and set a unique module name (aka emitter)_ for that object. Alternatively, when responding to requests, for example when using Express, it is a better idea to tie the emitter to the request. This is described later in this document. Loggers are created by calling LogManager#get. var log = logMgr.get('emitter-name'); // This is equivalent var log = new Logger(logMgr,'emitter-name'); // A shortcut that is also equivalent and that uses a global LogManager object var log = require('epdoc-logger').get('emitter-name');Configuring TransportsThe module has built-in support for the following transports: console (default) file (specify path) - logs as a JSON array SOS Max - SOS max is the POWERFLASHER Socket Output Server - a fast and helpful programmer tool with graphical user interface to display log messages for debugging purpose. SOS Max appears to not work on the latest version of Mac OS X. line - A line buffer/callback used only for automated testing loggly - See loggly.com. On startup the logger can wait for a transport to be initialized before logging, or it can begin writing log messages immediately (if LogManager#autoRun is set. By default the logger uses the Console Transport and must be started manually. If LogManager#autoRun is not set, then a call to LogManager#start or LogManager#setTransport will begin logging. Messages are buffered prior to the transport being intitialized, so prior to this event no messages will be lost. Logging to ConsoleMain File var gLogMgr = require('epdoc-logger').logMgr(a).start(); var log = gLogMgr.get('main'); log.info(&quot;Return value for %s is %s&quot;, &quot;hello&quot;, &quot;world&quot; ); log.data('req',{a:3}).info(); log.data('res',{b:4}).info(&quot;My message with %s support&quot;, 'formatting');Other File var log = require('epdoc-logger').get('other'); log.info(&quot;Hello world&quot;);Logging to a FileThis shows the more general use of the logger object. var gLogMgr = require('epdoc-logger').logger(); var log = gLogMgr.get('MyModule'); logger.setTransport( 'file', { path: 'path/to/myfile.log' } ); log.info(&quot;Return value for %s is %s&quot;, &quot;hello&quot;, &quot;world&quot; ); log.data('req',{a:3}).info(); log.data('res',{b:4}).info(&quot;My message with %s support&quot;, 'formatting');Log output to a file is a JSON-formatted array with [ date, level, sid, module, message, data ], as defined under the LogMessage function (below). Logging to SOSWhen you set the logger to SOS the setLogger method returns immediately, but the socket takes awhile to initialize. In the meantime log messages are queued up and getLogger() returns the SOS logger. Once the connection is made the messages are flushed. If the connection is refused the messages are flushed to the previously set logger output (usually the console). var logger = require('epdoc-logger').logger({autoRun:false}); var log = Logger.get('MyModule'); logger.setTransport( { type: 'sos', bIncludeSessionId: false } ); log.info(&quot;Return value for %s is %s&quot;, &quot;hello&quot;, &quot;world&quot; );Logging to LogglyLoggly output is buffered and sent in batches. As a result it is important to shutdown logging before exiting. See the example earlier in this readme showing how this is done. Advanced (needs updating)Transports can also be closed using unsetLogger. In this event logging will revert to the previously specified transport. For example, if you specify an SOS transport and the SOS application is closed, logging will return back to the console and the console will be (re)started automatically. If an active transport closes on it's own (e.g. SOS Max application exits) the active transport is automatically shifted off the list of transports as if calling unsetLogger. See the files in the test folder for additional examples and information. A call to setLogger will stop the previously activated transport (if any), add the new transport to the stack and automatically start the new transport. Transports are maintained in a list. When calling setLogger you are unshifting a transport onto the head of the list. When you call unsetLogger you are stopping the transport, shifting it off the list of transports, and restoring and restarting the previously set transport. The Logger will buffer messages while switching transports, however individual transports can do their own buffering (e.g. file). If a transport closes prematurely, it's buffer may be lost. There are probably few instances where you would need to manually call unsetLogger or deal with the list of transports, except where wishing to start and stop an SOS-style transport. The setLogger(type,options) has the following parameters: type - The transport type, which is either a string (one of the built-in transports 'console', 'file' or 'sos') or the class of a custom transport. options - An object with the following optional parameters path - 'path/to/myfile.log', used when type is file dateFormat - one of 'ISO' or 'formatMS', default is dependent on the transport but is usually 'formatMS' (not used with loggly) bIncludeSid - Indicates whether the sessionId should be included in the output, defaults to true To build your own custom transport class it just copy or subclass the console transport (obtained using Logger.getLoggerClass('console')) and modify as has been done for the file and sos transports. Loggly has these additional options: token (required) Token issued by [loggly.com] for your account bufferSize (optional, default 100 messages) Number of messages to buffer flushInterval (optional, default 5000 ms) An interval timer that flushes messages if there are any Logging Example// Get the global logger object var logMgr = require('epdoc-logger').logMgr({sid:false}); // Logger static methods logMgr.setTransport( 'file', { path: 'path/to/myfile.log', dateFormat: 'ISO', sid: false } ); var loggerType = logMgr.getCurrentTransport().type(); // Will return the transport type of the logger logMgr.setLevel( 'warn' ); var startTime = logMgr.getStartTime(); // Milliseconds // Get a Logger object for this file or module var log = logMgr.get('MyClassName'); // Instance methods. Each line outputs a message. log.data('a',1).data('b',[2,3]).info(); log.data({a:1,b:[2,3]}).info(&quot;My message&quot;); log.info( &quot;I just want to say %s to the %s&quot;, &quot;Hello&quot;, &quot;World&quot; ); log.action('obj.update').debug( &quot;We %s formatted messages&quot;, &quot;do&quot; ); log.error( new Error(&quot;My error&quot;) ); log.verbose( &quot;The default is to not output verbose messages, so this will not by default be output&quot; ); log.warn( &quot;Danger Will Robinson, danger&quot; ); log.fault( &quot;Restarting server in %d seconds&quot;, 10 ); // Outputs a new message log.date(); // Output now's date/time log.separator(); // Output a line separator log.log( 'info', &quot;This method %s supports util.format style formating&quot;, &quot;also&quot; ); // Enable verbose messages to be output for this log object (overrides global setting) log.setLevel( &quot;verbose&quot; );Logger Method ChainingMost Logger methods support chaining. The following methods all add column values to the message that is output but do not output the message: action - Sets the action column value to this string. data - Sets the data column value. Either pass in a key value pair, which is then added to the data object, or an object, which the data object is then set to. set - Sets a value in a custom column and keeps this value for the duration of the Log object's lifespan. This column is currently only output to the loggly transport. The following methods result in a message being output with the corresponding log level set: info warn debug verbose error fatal The following methods result in a message output with log level set to INFO: separator - Output a separator line containing # characters date - Outputs localtime, utctime and uptime log - Outputs level and string message, for example: log.log( 'info', &quot;Found %d lines&quot;, iLines ). level - Optional level (defaults to info) msg - String to output, formatted with util.format Custom Log LevelsLog level defaults are set in LogManager: this.LEVEL_DEFAULT = 'debug'; // Default threshold level for outputting logs this.LEVEL_INFO = 'info'; // If changing LEVEL_ORDER, what level should internally generated info messages be output at? this.LEVEL_WARN = 'warn'; // If changing LEVEL_ORDER, what level should internally generated warn messages be output at? this.LEVEL_ORDER = ['verbose', 'debug', 'info', 'warn', 'error', 'fatal'];You can customize log levels by setting the value of this array after constructing your LogManager object. Any subsequently created Logger objects will have methods with the names you have provided. Please use lowercase log level names. Express Middleware (Needs Updating)Note: This section needs to be updated. The included express middleware are instantiated as follows: var LogMgr = require('epdoc-logger'); var reqId = Logger.middleware().reqId; var responseLogger = Logger.middleware().responseLogger; var routeLogger = Logger.middleware().routeLogger; var routeSeparator = Logger.middleware().routeSeparator; var app = express(); app.use(reqId()); app.use(app.router); app.all('*', responseLogger()); app.all('*', routeSeparator()); app.all('*', routeLogger());See test/reqtest.js for an example of how to use a stub request and response method to test middleware. This technique can also be useful if you wish to use the req/res/next mechanism in non-express environments. As an example, you could have req/res objects for tracking AMQP (RabbitMQ) requests and responses and associating reqIds with the AMQP requests. reqIdAdds _reqId and _hrStartTime to the request object. These are used later when logging. ResponseLoggerThe responseLogger middleware mixes custom logging methods, similar to those in the logging object, into the express response object. This will add request-context-sensitive logging information to each log message. As with the logging object, most methods can be chained. An example usage: function myFunction(req,res,params) { res.pushRouteInfo('myFunction'); res.action('complete').data(params).info('Entering function'); res.popRouteInfo(); }RouteSeparatorAdds a separator line to the log file for each new route. RouteLoggerAdds an information line to the log file for each new route. TestUnit tests are not very good for this modules, however the module is in heavy use within our own applications, and so errors are quickly found. Action Items The express middleware is currently being updated. Add koa middleware (I don't currently have a koa project going, so this may not happen for awhile) Loggly support - DONE! AuthorJim Pravetz jpravetz@epdoc.com LicenseMIT × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"CallbackTransport.html":{"id":"CallbackTransport.html","title":"Class: CallbackTransport","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Class: CallbackTransport CallbackTransport new CallbackTransport(options, sid) Create a new Callback transport where output is added to a data array or a callback is used to pass thru the log message. Used for testing. Parameters: Name Type Argument Description options Object Output options include: sid boolean &lt;optional&gt; If true then output express request and session IDs, otherwise do not output these values Methods clear() Used to clear the logger display. This is applicable only to certain transports, such as socket transports that direct logs to a UI. ready() Return true if this logger is ready to accept write operations. Otherwise the caller should buffer writes and call write when ready is true. Returns: Type boolean write(params) Write a log line Parameters: Name Type Description params Object Parameters to be logged: Properties Name Type Description time Date Date object level string log level (INFO, WARN, ERROR, or any string) reqId string express request ID, if provided (output if options.sid is true) sid string express session ID, if provided (output if options.sid is true) module string name of file or module or emitter (noun) action string method or operation being performed (verb) message string text string to output custom Object Arbitrary data to be logged in a 'custom' column if enabled via the LogManager. data Object Arbitrary data to be logged in the 'data' column × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"ConsoleTransport.html":{"id":"ConsoleTransport.html","title":"Class: ConsoleTransport","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Class: ConsoleTransport ConsoleTransport new ConsoleTransport(options, sid, timestamp, format, custom) Create a new Console transport to output log messages to the console. Parameters: Name Type Argument Default Description options Object Output options include: sid boolean &lt;optional&gt; If true then output express request and session IDs, otherwise do not output these values timestamp string &lt;optional&gt; ms Set the format for timestamp output, must be one of 'ms' or 'iso'. format string &lt;optional&gt; jsonArray Set the format for the output line. Must be one of 'json' or 'jsonArray'. custom boolean &lt;optional&gt; true Set whether to output a 'custom' column. Methods clear() Used to clear the logger display. This is applicable only to certain transports, such as socket transports that direct logs to a UI. ready() Return true if this logger is ready to accept write operations. Otherwise the caller should buffer writes and call write when ready is true. Returns: Type boolean write(params) Write a log line Parameters: Name Type Description params Object Parameters to be logged: Properties Name Type Description time Date Date object level string log level (INFO, WARN, ERROR, or any string) reqId string express request ID, if provided (output if options.sid is true) sid string express session ID, if provided (output if options.sid is true) module string name of file or module or emitter (noun) action string method or operation being performed (verb) message string text string to output custom Object Arbitrary data to be logged in a 'custom' column if enabled via the LogManager. data Object Arbitrary data to be logged in the 'data' column × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"Logger.html":{"id":"Logger.html","title":"Class: Logger","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Class: Logger Logger A Logger object has methods to write log information to a specified transport. The line below shows sample output when writting to the Console transport. [&quot;00:03.767&quot;,&quot;INFO&quot;,0,&quot;&quot;,&quot;main&quot;,&quot;app.initialized&quot;,&quot;We've initialized the app&quot;,{&quot;process&quot;:{&quot;pid&quot;:12345}}] For the above output, time is since this module was first initialized and is shown in milliseconds. This is followed by the log level, request ID, session ID, module/emitter name, action, message and arbitrary data. The format of the output is determined by the transport and it's settings. new Logger(logMgr, modulename, context) Create a new log object with methods to log to the transport that is attached to logMgr. This log object can be attached to another object, for example an Express request object, in order to pass the log object down through a calling stack. If a context is passed in, various properties may be harvested off of the req property. These include: req._reqId (populates reqId column), req.sid (uses req.session.id or req.sessionId and populates sid column), req._startTime and req._hrStartTime (either can be used to determine the response time for a request). Parameters: Name Type Argument Description logMgr LogManager The parent LogManager object that specifies the transport and provides lower-level output methods modulename string | Array.&lt;string&gt; &lt;optional&gt; The name of the module or emitter that is emitting the log message, used to populate the module output column. This can be modified to show method call hierarchy by calling pushName and popName. context object &lt;optional&gt; A context object. For Express or koa this would have req and res properties. Examples // Create a new Logger object step by step var EpdocLogger = require('epdoc-logger'); var LogManager = EpdocLogger.LogManager; var Logger = EpdocLogger.Logger; var logMgr = new LogManager(); var log = new Logger(gLogMgr,'logtest'); // Create a new Logger object the easy way using global LogManager. var log = require('epdoc-logger').get('logtest'); Methods action(arguments) Set the value of the action column. Action is a unique column in the log output and is a machine-searchable verb that uniquely describes the type of log event. Parameters: Name Type Argument Description arguments string &lt;repeatable&gt; Single string or multiple strings that are then joined with a '.'. Returns: The Logger object Type Logger Example log.action('message.sent').info(&quot;Message has been sent&quot;); data(key, value) Set a property or multiple properties in the data column. Parameters: Name Type Argument Description key string | object If a string then sets data[key] to value. Otherwise extend the object data with the object key. value string &lt;optional&gt; If key is a string then sets data[key] to this value. Returns: Type Logger Example log.data('a',3).data('b',4).info(); log.data({a:3,b:4}).info(); elapsed() Used to measure the duration of requests or other events. Add an 'elapsed' attribute to data being output, which is the time since this request object was initialized. Requirement: One of the following three must be initialized: 1. request object must set it's _delayTime 2. request object must set it's _startTime (ms) 3. must have called resetElapsed() to reset this.t0 Returns: this Type Object getHrElapsed() High resolution response time. Returns the response time in milliseconds with two digits after the decimal. Returns: Response time in milliseconds Type number hrElapsed(key) Adds the High Resolution response time to the data column. Parameters: Name Type Argument Default Description key string &lt;optional&gt; elapsed Name of property in the data column. Returns: Self. Type Logger isAboveLevel(level) Test if the given level is above the log level set for this Logger object. Parameters: Name Type Description level string Must be one of LogManager.LEVEL_ORDER. Returns: True if the level is equal to or greater then the reference, or if reference is null. Type boolean log(level, msg) Output a log message, specifying the log level as the first parameter, and a string with util.format syntax as a second parameter, for example myLogger.log('info', 'test message %s', 'my string'); The second parameter can optionally be an array of strings or arrays, each one of which will be treated as input to util.format. This is useful for logMgrs that support folding (muli-line output). Example: log.log( 'info', [[&quot;Found %d lines&quot;, iLines],&quot;My second line&quot;,[&quot;My %s line&quot;,'third']]); ); Parameters: Name Type Argument Default Description level string &lt;optional&gt; info One of Logger.LEVEL_ORDER. Defaults to `info` if not present. msg string The message String, or an array of strings, to be formatted with util.format. logObj(key, value) Log a key,value or an object. If an object the any previous logged objects are overwritten. If a key,value then add to the existing logged object. Objects are written when a call to info, etc is made. Parameters: Name Type Argument Description key string | number | object If a string or number then key,value is added, else the object ```key``` is added value &lt;optional&gt; If key is a string or number then data.key is set to value Deprecated: Use ```data``` method instead. Returns: Type Logger logParams(params) Log a raw message in the spirit of Logger.logMessage, adding sid and reqId columns from this.ctx.req Looks for sessionID in req.session.id or req.sessionId, otherwise uses the passed in values for sid and reqId (if any). This is the method that calls the underlying logging outputter. If you want to use your own logging tool, you can replace this method, or provide your own transport. Parameters: Name Type Description params Returns: Type * popName(options) See pushRouteInfo. Should be called if returning back up a function chain. Does not need to be called if the function terminates the request with a response. Parameters: Name Type Description options Available options are 'all' if all action contexts are to be removed from the _logging stack. See: Logger#pushName Returns: Response object pushName(name) A method to add context to the method stack that has gotten us to this point in code. The context is pushed into a stack, and the full stack is output as the module/emitter property of the log message. This method is usually called at the entry point of a function. Can also be called by submodules, in which case the submodules should call popName when returning. Note that it is not necessary to call popName when used in the context of an Express context and terminating a request with a response. Parameters: Name Type Description name (required) String in the form 'api.org.create' (route.method or route.object.method). See: Logger#popName Returns: Response object resetElapsed() Reset the elapsed time timer. Returns: Self Type Logger separator() Log a separator line that contains a message with '#' characters. Returns: Type Logger set(key, value) Set custom data that is output in a separate column called custom`. This column must be specifically enabled via the LogManager constructor's custom option. Parameters: Name Type Description key String | object If a string then sets custom.key = value, otherwise extends custom with key value * (Optional) Set key to this value Returns: Type Logger setLevel(level) Set the log level for this object. This overrides the global log level for this object. Parameters: Name Type Description level string Must be one of LogManager.LEVEL_ORDER. Returns: Self Type Logger × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"LogglyTransport.html":{"id":"LogglyTransport.html","title":"Class: LogglyTransport","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Class: LogglyTransport LogglyTransport new LogglyTransport(options, sid, token, tags, url, host, timestamp, format, custom, bufferSize, flushInterval) Create a new Loggly transport to output log messages to loggly. Parameters: Name Type Argument Default Description options Object Output options include: sid boolean &lt;optional&gt; If true then output express request and session IDs, otherwise do not output these values token string The loggly token used for authenticating to loggly. tags Array.&lt;string&gt; &lt;optional&gt; Array of loggly tags. url string &lt;optional&gt; URL to use for the loggly service. Should be set only if the default URL value is not working. host string &lt;optional&gt; os.hostname() Set the name of the host that is reported to loggly in a host column. timestamp string &lt;optional&gt; ms Set the format for timestamp output, must be one of 'ms' or 'iso'. format string &lt;optional&gt; jsonArray Set the format for the output line. Must be one of 'json' or 'jsonArray'. custom boolean &lt;optional&gt; true Set whether to output a 'custom' column. bufferSize number &lt;optional&gt; 100 The maximum number of lines of log messages to buffer before writing to loggly. flushInterval number &lt;optional&gt; 5000 The maximum number of milliseconds of buffering before writing to loggly. Methods clear() Used to clear the logger display. This is applicable only to certain transports, such as socket transports that direct logs to a UI. ready() Return true if this logger is ready to accept write operations. Otherwise the caller should buffer writes and call write when ready is true. Returns: Type boolean write(params) Write a log line Parameters: Name Type Description params Object Parameters to be logged: Properties Name Type Description time Date Date object level string log level (INFO, WARN, ERROR, or any string) reqId string express request ID, if provided (output if options.sid is true) sid string express session ID, if provided (output if options.sid is true) module string name of file or module or emitter (noun) action string method or operation being performed (verb) message string text string to output custom Object Arbitrary data to be logged in a 'custom' column if enabled via the LogManager. data Object Arbitrary data to be logged in the 'data' column × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"LogManager.html":{"id":"LogManager.html","title":"Class: LogManager","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Class: LogManager LogManager A LogManager is used to manage logging, including transports, startup, shutdown and various options. new LogManager(options, autoRun) Create a new LogManager object with a default ConsoleTransport. Logged messages will not begin writing to the transport until LogManager#start or LogManager#setTransport is called. To use a different transport, set the transport using setTransport('file'). You will likely have one LogManager per application, then call logMgr.get() to get a log object which you will use for logging messages. Parameters: Name Type Argument Default Description options Object &lt;optional&gt; - Properties Name Type Argument Default Description t0 Date &lt;optional&gt; now The earliest known time for when the process was started sid boolean &lt;optional&gt; false Indicates whether a session ID column should be included in log output custom boolean &lt;optional&gt; false Indicates whether a custom column should be included in log output level string &lt;optional&gt; debug The log level at and above which log messages will be written errorStack boolean &lt;optional&gt; false Include the error stack in the data column when writing Error objects to the log. transport Object &lt;optional&gt; Set the transport now rather than calling {#setTransport}. This object contains the config for the transport and must include a type property. Properties Name Type Description type string The name of the transport autoRun boolean &lt;optional&gt; false If set to true then logging will be immediately enabled and a call to LogManager#start will not be necessary. Methods destroying(callback) Performs a managed shutdown of the logging service. This is relevant if using a buffered logger such as the loggly transport. Parameters: Name Type Argument Description callback function &lt;optional&gt; Called with err when complete. Returns: Type Promise errorStack(bShow) Set whether to show an error stack as data when an Error is encountered. This option can also be set in LogManager#constructor. The property is referenced by Logger objects when they are created, and is used by the Logger to determine whether to output an Error stack trace in the data column when an Error is logged. Parameters: Name Type Argument Default Description bShow boolean &lt;optional&gt; true Set whether to log the call stack for logged errors. Returns: Type LogManager flushing(callback) Flush the queue of the current transport. Parameters: Name Type Argument Description callback function &lt;optional&gt; Called with err when complete. Returns: Type Promise get(moduleName, context) Return a new module Logger object with the specified module name. Although it's a new logger instance, it still uses the same underlying 'writeMessageParams' method, and whatever transport is set globally by this LogManager. Parameters: Name Type Argument Description moduleName string Name of module or file, added as a column to log output context object &lt;optional&gt; A context object. For Express or koa this would have 'req' and 'res' properties. The context.req may also have reqId and sid/sessionId/session.id properties that are used to populate their respective columns of output. Otherwise these columns are left blank on output. Returns: A new object. Type logger getCount() Return a count object containing a count of the number of log messages produced at the various log levels defined in LogManager#LEVEL_ORDER. Returns: with properties for 'warn', 'info', etc. where the value of each property is a number. Type Object getCurrentTransport() Get the current transport logger. Returns: The current transport, a subclass of console.js. Call type() on the return value to determine it's type. Type * getStartTime() Get the time at which the module was initialized Returns: Start time in milliseconds Type Number getTransportByName() Return one of the predefined transport objects. If you want to define your own class, it is suggested you subclass or copy one of the existing transports. Returns: LogManager Class for which you should call new with options, or if creating your own transport you may subclass this object. Type * isAboveLevel() Return true if the level is equal to or greater then the LogManager#logLevel property. Returns: Type boolean logMessage(level, action, message, data) A wrapper for logParams with a more limited set of properties. Parameters: Name Type Argument Description level string action string message string data Object &lt;optional&gt; See: {LogManager#logParams} Returns: Type LogManager logParams(msgParams) Write a raw message to the transport. The LogManager will buffer messages to handle the situation where we are switching transports and the new transport is not yet ready. It is possible to log directly to a transport using this method and never need to create a Logger object. Parameters: Name Type Description msgParams Object The message to be written Properties Name Type Argument Default Description level string &lt;optional&gt; info Must be one of LEVEL_ORDER values, all lower case sid string &lt;optional&gt; sessionID to display module string &lt;optional&gt; Module or emitter descriptor to display (usually of form route.obj.function) time string &lt;optional&gt; now A date object with the current time timeDiff string &lt;optional&gt; calculated The difference in milliseconds between 'time' and when the application was started, based on reading LogManager#getStartTime message string | Array.&lt;string&gt; A string or an array of strings. If an array the string will be printed on multiple lines where supported (e.g. SOS). The string must already formatted (e.g.. no '%s') Returns: Type LogManager setLevel(level) Set the LogManager objects's minimum log level Parameters: Name Type Description level string Must be one of LogManager#LEVEL_ORDER Returns: Type LogManager setStartTime(d) Set automatically when the epdoc-logger module is initialized, but can be set manually to the earliest known time that the application was started. Parameters: Name Type Description d Date The application start time Returns: Type LogManager setTransport(type, options) Set log target by unshifting the provided transport object onto the list of transports. The default transport, before any is unshifted onto the list of transports, is the console transport. If you add a transport (eg. file transport) then later remove it, the previously set logger (eg. console) will be used. Parameters: Name Type Description type string | Object For the provided loggers, one of 'sos', 'file', 'line', or 'console'. For a custom transport this should be a transport class object that can be instantiated with 'new'. To create your own transport class, use getLoggerClass('console') and then subclass this class. options string are passed to the transport when constructing the new transport object. Options for the predefined transports are: path path to file, used by file transport timestamp {string} one of 'iso', 'smstime' or 'ms', defaults to 'ms' but may be overriden by transport requirements (e.g. loggly uses iso) sid {boolean} whether to include sessionId and reqId columns in log output (used with express and other request/response apps), overrides LogMgr setting. custom {boolean} Indicates whether to include 'custom' column or not, overrides LogMgr setting. Returns: Type LogManager start() Starts the transport at the head of the transport stack, if not already started. This starts logging. This is done manually because we may hold of logging until the transport is set. Returns: Type LogManager unsetTransport() Unset the last logger. The latest logger is shifted off the list of loggers. writeCount(message) Write a log line to the transport with a count of how many of each level of message has been output. This is a useful function to call when the application is shutdown. Parameters: Name Type Argument Description message string &lt;optional&gt; Returns: Type LogManager × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "},"Response.html":{"id":"Response.html","title":"Class: Response","body":" Documentation Classes CallbackTransportConsoleTransportLoggerLogglyTransportLogManagerResponse Global formatMSreqIdRequestself Class: Response Response new Response(opt_options) Add a log object to req and res objects. Parameters: Name Type Description opt_options Object responseBuilder: a method to build the response object in the event of an exception, error or success. Errors are indicated by the exception being passed in to the builder, or errorCode being defined. The value may be a function or 'json-api' to use the JSON API response builder. objName: {string} the name of an object to mixin our responseLogger methods with, defaults to 'log'. Returns: Type function × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-03-29T12:04:17-07:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
